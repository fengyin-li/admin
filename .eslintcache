[{"E:\\admin\\src\\index.js":"1","E:\\admin\\src\\route\\route.js":"2","E:\\admin\\src\\pages\\mine.js":"3","E:\\admin\\src\\pages\\jurisdiction\\jurisdictionUser.js":"4","E:\\admin\\src\\pages\\list\\list.js":"5","E:\\admin\\src\\api\\list.js":"6","E:\\admin\\src\\utils\\config.js":"7","E:\\admin\\src\\components\\Menu.js":"8","E:\\admin\\src\\pages\\visualization.js":"9","E:\\admin\\src\\pages\\jurisdiction\\jurisdictionRole.js":"10","E:\\admin\\src\\pages\\App.js":"11","E:\\admin\\src\\pages\\home.js":"12","E:\\admin\\src\\components\\Header.js":"13","E:\\admin\\src\\pages\\login.js":"14","E:\\admin\\src\\api\\axiosConfig.js":"15","E:\\admin\\src\\utils\\time.js":"16"},{"size":252,"mtime":1616556073040,"results":"17","hashOfConfig":"18"},{"size":1747,"mtime":1613978467255,"results":"19","hashOfConfig":"18"},{"size":109,"mtime":1611648252289,"results":"20","hashOfConfig":"18"},{"size":145,"mtime":1612512581825,"results":"21","hashOfConfig":"18"},{"size":10116,"mtime":1619419919288,"results":"22","hashOfConfig":"18"},{"size":435,"mtime":1616565260535,"results":"23","hashOfConfig":"18"},{"size":61,"mtime":1616564656918,"results":"24","hashOfConfig":"18"},{"size":3400,"mtime":1613634910493,"results":"25","hashOfConfig":"18"},{"size":138,"mtime":1613631518006,"results":"26","hashOfConfig":"18"},{"size":141,"mtime":1613787597962,"results":"27","hashOfConfig":"18"},{"size":1420,"mtime":1620633965859,"results":"28","hashOfConfig":"18"},{"size":3732,"mtime":1618819967659,"results":"29","hashOfConfig":"18"},{"size":1941,"mtime":1612508710527,"results":"30","hashOfConfig":"18"},{"size":2745,"mtime":1620637166713,"results":"31","hashOfConfig":"18"},{"size":1266,"mtime":1616565509267,"results":"32","hashOfConfig":"18"},{"size":389,"mtime":1616568543519,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1jvss4r",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46","usedDeprecatedRules":"47"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"59"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"59"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"E:\\admin\\src\\index.js",[],["72","73"],"E:\\admin\\src\\route\\route.js",[],"E:\\admin\\src\\pages\\mine.js",[],"E:\\admin\\src\\pages\\jurisdiction\\jurisdictionUser.js",[],["74","75"],"E:\\admin\\src\\pages\\list\\list.js",["76"],"import React, { useEffect, useState } from 'react'\r\nimport { Input,Button,Table,Pagination,Modal,Select,message  } from 'antd';\r\nimport {listApi} from '../../api/list'\r\nimport {conversionTime} from '../../utils/time'\r\nimport '../../assets/css/list.css'\r\n  function List() {\r\n    const [searchName, setSearchName] = useState('');\r\n    const [tableData, setTableData] = useState([]);\r\n    const [selectedKeys, setSelectedKeys] = useState([]);\r\n    const [page, setPage] = useState(1);\r\n    const [pageSize, setPageSize] = useState(2);\r\n    const [total, setTotal] = useState(0);\r\n    const [addVisible, setAddVisible] = useState(false);\r\n    const [delVisible, setDelVisible] = useState(false);\r\n    const [addVisibleStatus, setAddVisibleStatus] = useState(true);\r\n    const [modalGoodName, setModalGoodName] = useState('');\r\n    const [modalGoodProid, setModalGoodProid] = useState('');\r\n    const [modalGoodStock, setModalGoodStock] = useState(0);\r\n    const [modalGoodStatus, setModalGoodStatus] = useState(0);\r\n    const [modalGoodid, setModalGoodid] = useState('');\r\n    const [ModalLoading, setModalLoading] = useState(false);\r\n    const [delModalLoading, setDelModalLoading] = useState(false);\r\n    useEffect(() => {\r\n      // console.log('商品列表页面')\r\n      getGoodList()\r\n    }, [page,pageSize]);\r\n    const columns = [ {\r\n      title: '商品编号',\r\n      dataIndex: 'proid',\r\n    },{\r\n      title: '商品名称',\r\n      dataIndex: 'name',\r\n    }, {\r\n      title: '商品库存',\r\n      dataIndex: 'stock',\r\n    }, {\r\n      title: '建立时间',\r\n      dataIndex: 'createTime',\r\n      render: (text,record) => (\r\n        <span>{conversionTime(text)}</span>\r\n      ),\r\n    }, {\r\n      title: '商品状态',\r\n      dataIndex: 'status',\r\n      render: (text,record) => (\r\n        <span>{text === 0 ? '正常' : text === 1 ? '上架':'异常'}</span>\r\n      ),\r\n    }, {\r\n      title: '操作',\r\n      dataIndex: 'action',\r\n      render: (text, record) => (\r\n        <div>\r\n          <span className='curp' style={{color:'#1890ff'}} onClick={()=>openEditModal(record)}>编辑</span>\r\n          <span className='curp' style={{color:'red',marginLeft:'10px'}} onClick={()=>openDelModal(record)}>删除</span>\r\n        </div>\r\n      ),\r\n    }];\r\n    const Option = Select.Option;\r\n    const rowSelection = {\r\n      onChange(selectedRowKeys, selectedRows) {\r\n        // console.log(\"选中的key值:\",selectedRowKeys, \"选中的数据: \", selectedRows);\r\n        setSelectedKeys(selectedRowKeys)\r\n      },\r\n    };\r\n    function changePage(page,size) {\r\n      setPage(page)\r\n      setPageSize(size)\r\n    }\r\n    function getGoodList() {\r\n      let data = {page,pageSize,searchName}\r\n      listApi.getGoodList(data)\r\n      .then(res=>{\r\n        let {code,msg,data} = res;\r\n        if (code === 1) {\r\n          setTableData(data.list)\r\n          setTotal(data.total)\r\n        } else {\r\n          message.error(msg);\r\n        }\r\n      })\r\n    }\r\n    //刷新\r\n    function refresh() {\r\n      setSearchName('')\r\n      if (page === 1) {\r\n        getGoodList()\r\n      } else {\r\n        setPage(1)\r\n      }\r\n    }\r\n    function goSearch() {\r\n      if (page === 1) {\r\n        getGoodList()\r\n      } else {\r\n        setPage(1)\r\n      }\r\n    }\r\n    function addModalOk() {\r\n      setModalLoading(true)\r\n      if (checkData()) {\r\n        let data = {\r\n          name:modalGoodName,\r\n          stock:modalGoodStock,\r\n          proid:modalGoodProid\r\n        }\r\n        if (addVisibleStatus) {\r\n          listApi.addNewGood(data)\r\n          .then(res=>{\r\n            let {code,msg} = res;\r\n            if (code === 1) {\r\n              setPage(1)\r\n              message.success(msg);\r\n              setAddVisible(false)\r\n             \r\n            } else {\r\n              message.error(msg);\r\n            }\r\n          })\r\n          .finally(res=>{\r\n            setModalLoading(false)\r\n            // getGoodList()\r\n          })\r\n        } else {\r\n          data.status = modalGoodStatus;\r\n          data.id = modalGoodid;\r\n          listApi.editGood(data)\r\n          .then(res=>{\r\n            let {code,msg} = res;\r\n            if (code === 1) {\r\n              setPage(1)\r\n              message.success(msg);\r\n              setAddVisible(false)\r\n            } else {\r\n              message.error(msg);\r\n            }\r\n          })\r\n          .finally(res=>{\r\n            setModalLoading(false)\r\n          })\r\n        }\r\n      }\r\n    }\r\n    function delModalOk() {\r\n      setDelModalLoading(true)\r\n      const data = {\r\n        id:modalGoodid,\r\n      }\r\n      listApi.delGood(data)\r\n      .then(res=>{\r\n        console.log(res)\r\n        let {code,msg} = res;\r\n        if (code === 1) {\r\n          setPage(1)\r\n          message.success(msg);\r\n          setDelVisible(false)\r\n        } else {\r\n          message.error(msg);\r\n        }\r\n      })\r\n      .finally(res=>{\r\n        setDelModalLoading(false)\r\n      })\r\n    }\r\n    //校验参数\r\n    function checkData() {\r\n      if (modalGoodName === '') {\r\n        message.error('请输入商品名称');\r\n        return false\r\n      } else if(modalGoodProid === '') {\r\n        message.error('请输入商品编号');\r\n        return false\r\n      } else if(modalGoodStock === '') {\r\n        message.error('请输入商品库存');\r\n        return false\r\n      } else if(!addVisibleStatus) {\r\n        if (modalGoodStatus === '') {\r\n          message.error('请选择商品状态');\r\n          return false\r\n        }\r\n      }\r\n      return true\r\n    }\r\n    //打开删除弹窗\r\n    function openDelModal(data) {\r\n      setModalGoodid(data.id)\r\n      setDelVisible(true)\r\n    }\r\n    //打开编辑弹窗\r\n    function openEditModal(data) {\r\n      // console.log(data)\r\n      setAddVisibleStatus(false)\r\n      setModalGoodid(data.id)\r\n      setModalGoodName(data.name)\r\n      setModalGoodStock(data.stock)\r\n      setModalGoodProid(data.proid)\r\n      setModalGoodStatus(data.status)\r\n      setAddVisible(true)\r\n    }\r\n    //打开添加弹窗\r\n    function openVisible() {\r\n      setAddVisibleStatus(true)\r\n      setModalGoodName('')\r\n      setModalGoodProid('')\r\n      setModalGoodStock(1)\r\n      setModalGoodStatus(0)\r\n      setAddVisible(true)\r\n    }\r\n    function changeModalGoodStatus(val) {\r\n      setModalGoodStatus(val)\r\n    }\r\n    return (\r\n      <div className=\"listContainer containerp\">\r\n        <h1>商品列表</h1>\r\n        <div className='search'>\r\n          <div className=\"searchLeft\">\r\n            <div className=\"searchName\"> \r\n              <Input placeholder=\"商品名称搜索\"\r\n                value={searchName}\r\n                onChange={e=>setSearchName(e.target.value)}/>\r\n            </div>\r\n          </div>\r\n          <div style={{display:'flex'}}>\r\n            <Button type=\"primary\" onClick={goSearch} style={{marginRight:'10px'}}>搜索</Button>\r\n            <Button type=\"primary\" onClick={refresh} style={{marginRight:'10px'}}>刷新</Button>\r\n            <Button type=\"primary\" onClick={()=>openVisible()} >添加</Button>\r\n          </div>\r\n        </div>\r\n        <Table  pagination={false} rowKey={record => record.proid} \r\n        selectedKeys={selectedKeys}  rowSelection={rowSelection} \r\n        columns={columns} dataSource={tableData} />\r\n        <div className=\"listPage\">\r\n          <Pagination current={page} pageSize={pageSize} \r\n          showTotal={total => `商品总数：${total}`}\r\n          pageSizeOptions={[1,2,3]} \r\n          showSizeChanger={true}\r\n          onChange={(page,size) =>changePage(page,size)}\r\n          total={total}/>\r\n        </div>\r\n        <Modal\r\n          title={addVisibleStatus ? \"添加\" : '编辑'} \r\n          cancelText=\"取消\"\r\n          okText=\"确认\"\r\n          visible={addVisible}\r\n          onOk={addModalOk}\r\n          onCancel={()=>setAddVisible(false)}\r\n          confirmLoading={ModalLoading}\r\n        >\r\n          <div className=\"modalContainer\">\r\n            <div className=\"modalItem\">\r\n              <p className=\"modalLabel\">商品名称：</p>\r\n              <div className=\"modalVal\">\r\n                <Input placeholder=\"请输入商品名称\"\r\n                  value={modalGoodName}\r\n                  onChange={e=>setModalGoodName(e.target.value)}/>\r\n              </div>\r\n              <p className=\"modalRequired\">*</p>\r\n            </div>\r\n            <div className=\"modalItem\">\r\n              <p className=\"modalLabel\">商品编号：</p>\r\n              <div className=\"modalVal\">\r\n                <Input placeholder=\"请输入商品编号\"\r\n                  value={modalGoodProid}\r\n                  onChange={e=>setModalGoodProid(e.target.value)}/>\r\n              </div>\r\n              <p className=\"modalRequired\">*</p>\r\n            </div>\r\n            <div className=\"modalItem\">\r\n              <p className=\"modalLabel\">商品库存：</p>\r\n              <div className=\"modalVal\">\r\n                <Input placeholder=\"请输入商品库存\"\r\n                  type=\"number\"\r\n                  value={modalGoodStock}\r\n                  onChange={e=>setModalGoodStock(e.target.value)}/>\r\n              </div>\r\n              <p className=\"modalRequired\">*</p>\r\n            </div>\r\n            <div className=\"modalItem\" style={{display:addVisibleStatus ? 'none' : 'flex'}}>\r\n              <p className=\"modalLabel\">商品状态：</p>\r\n              <div className=\"modalVal\">\r\n                <Select value={String(modalGoodStatus)} style={{ width: 200 }} onChange={changeModalGoodStatus}>\r\n                  <Option value=\"0\">正常</Option>\r\n                  <Option value=\"1\">上架</Option>\r\n                </Select>\r\n              </div>\r\n              <p className=\"modalRequired\">*</p>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n        <Modal\r\n          title=\"警告\" \r\n          cancelText=\"取消\"\r\n          okText=\"确认\"\r\n          visible={delVisible}\r\n          onOk={delModalOk}\r\n          onCancel={()=>setDelVisible(false)}\r\n          confirmLoading={delModalLoading}\r\n        >\r\n          <p style={{fontSize:'17px'}}>确定删除该商品吗？</p>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  export default List;",["77","78"],"E:\\admin\\src\\api\\list.js",[],["79","80"],"E:\\admin\\src\\utils\\config.js",[],"E:\\admin\\src\\components\\Menu.js",[],"E:\\admin\\src\\pages\\visualization.js",[],"E:\\admin\\src\\pages\\jurisdiction\\jurisdictionRole.js",[],["81","82"],"E:\\admin\\src\\pages\\App.js",[],"E:\\admin\\src\\pages\\home.js",[],"E:\\admin\\src\\components\\Header.js",[],"E:\\admin\\src\\pages\\login.js",[],"E:\\admin\\src\\api\\axiosConfig.js",[],"E:\\admin\\src\\utils\\time.js",[],{"ruleId":"83","replacedBy":"84"},{"ruleId":"85","replacedBy":"86"},{"ruleId":"83","replacedBy":"87"},{"ruleId":"85","replacedBy":"88"},{"ruleId":"89","severity":1,"message":"90","line":26,"column":8,"nodeType":"91","endLine":26,"endColumn":23,"suggestions":"92"},{"ruleId":"83","replacedBy":"93"},{"ruleId":"85","replacedBy":"94"},{"ruleId":"83","replacedBy":"95"},{"ruleId":"85","replacedBy":"96"},{"ruleId":"83","replacedBy":"97"},{"ruleId":"85","replacedBy":"98"},"no-native-reassign",["99"],"no-negated-in-lhs",["100"],["99"],["100"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getGoodList'. Either include it or remove the dependency array.","ArrayExpression",["101"],["99"],["100"],["99"],["100"],["99"],["100"],"no-global-assign","no-unsafe-negation",{"desc":"102","fix":"103"},"Update the dependencies array to be: [getGoodList, page, pageSize]",{"range":"104","text":"105"},[1283,1298],"[getGoodList, page, pageSize]"]